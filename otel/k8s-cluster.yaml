# This configuration is managed by BindPlane OP.
# Configuration: k8s-cluster:1
receivers:
    k8s_cluster/source0_01HMS8GVNVFVD5TSWTKSJR1RY5:
        allocatable_types_to_report:
            - cpu
            - memory
            - ephemeral-storage
            - storage
        auth_type: serviceAccount
        collection_interval: 1m0s
        distribution: kubernetes
        node_conditions_to_report:
            - Ready
            - DiskPressure
            - MemoryPressure
            - PIDPressure
            - NetworkUnavailable
    k8s_events/source1_01HMS8GVNVFVD5TSWTKVNZS2JC:
        auth_type: serviceAccount
        namespaces:
            - kube-system
            - production
processors:
    batch/bindplane-gateway-agent: null
    resource/source0_01HMS8GVNVFVD5TSWTKSJR1RY5:
        attributes:
            - action: insert
              key: k8s.cluster.name
              value: minikube
    resource/source1_01HMS8GVNVFVD5TSWTKVNZS2JC:
        attributes:
            - action: insert
              key: k8s.cluster.name
              value: minikube
exporters:
    otlp/bindplane-gateway-agent:
        compression: gzip
        endpoint: bindplane-gateway-agent.bindplane-agent.svc.cluster.local:4317
        retry_on_failure:
            enabled: true
            initial_interval: 5s
            max_elapsed_time: 300s
            max_interval: 30s
        sending_queue:
            enabled: true
            num_consumers: 10
            queue_size: 5000
            storage: file_storage/bindplane-gateway-agent
        tls:
            insecure: true
extensions:
    file_storage/bindplane-gateway-agent:
        compaction:
            directory: $OIQ_OTEL_COLLECTOR_HOME/storage
            on_rebound: true
        directory: $OIQ_OTEL_COLLECTOR_HOME/storage
service:
    extensions:
        - file_storage/bindplane-gateway-agent
    pipelines:
        logs/source1_01HMS8GVNVFVD5TSWTKVNZS2JC__bindplane-gateway-agent-0:
            receivers:
                - k8s_events/source1_01HMS8GVNVFVD5TSWTKVNZS2JC
            processors:
                - resource/source1_01HMS8GVNVFVD5TSWTKVNZS2JC
                - batch/bindplane-gateway-agent
            exporters:
                - otlp/bindplane-gateway-agent
        metrics/source0_01HMS8GVNVFVD5TSWTKSJR1RY5__bindplane-gateway-agent-0:
            receivers:
                - k8s_cluster/source0_01HMS8GVNVFVD5TSWTKSJR1RY5
            processors:
                - resource/source0_01HMS8GVNVFVD5TSWTKSJR1RY5
                - batch/bindplane-gateway-agent
            exporters:
                - otlp/bindplane-gateway-agent

